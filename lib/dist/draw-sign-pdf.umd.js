(function(E,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("pdfjs-dist"),require("downloadjs"),require("pdf-lib")):typeof define=="function"&&define.amd?define(["exports","vue","pdfjs-dist","downloadjs","pdf-lib"],e):(E=typeof globalThis<"u"?globalThis:E||self,e(E.DrawSignPdf={},E.Vue,E.pdfjsLib,E.download,E.PDFLib))})(this,function(E,e,q,$,G){"use strict";var H=typeof document<"u"?document.currentScript:null;function Q(a){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(a){for(const s in a)if(s!=="default"){const n=Object.getOwnPropertyDescriptor(a,s);Object.defineProperty(o,s,n.get?n:{enumerable:!0,get:()=>a[s]})}}return o.default=a,Object.freeze(o)}const Z=Q(q),ee={props:{page:Object},setup(a,{emit:o}){const s=e.ref(null),n=e.ref(0),i=e.ref(0),t=()=>{o("measure",{scale:s.value.clientWidth/n.value})};return e.onMounted(async()=>{const l=await a.page,g=s.value.getContext("2d"),w=l.getViewport({scale:1,rotation:0});n.value=w.width,i.value=w.height,await l.render({canvasContext:g,viewport:w}).promise.then(function(){}),o("measure",{scale:s.value.clientWidth/n.value}),window.addEventListener("resize",t)}),e.onBeforeUnmount(()=>{window.removeEventListener("resize",t)}),{canvas:s,width:n,height:i}}},z=(a,o)=>{const s=a.__vccOpts||a;for(const[n,i]of o)s[n]=i;return s},te=["width","height"];function ne(a,o,s,n,i,t){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("canvas",{ref:"canvas",id:"canvas",class:"max-w-full",style:e.normalizeStyle({width:`${n.width}px`}),width:n.width,height:n.height},null,12,te)])}const ae=z(ee,[["render",ne],["__scopeId","data-v-ed76dd2b"]]),oe=e.defineComponent({props:{originWidth:Number,originHeight:Number,width:Number,height:Number,x:Number,y:Number,pageScale:{type:Number,default:1},path:String},emits:["delete","update"],setup(a,{emit:o}){const s=e.ref(0),n=e.ref(0),i=e.ref(0),t=e.ref(""),l=e.ref(""),g=e.ref(0),w=e.ref(0),v=e.ref(null),h=a.originWidth/a.originHeight;return e.onMounted(async()=>{await e.nextTick(),v.value&&v.value.setAttribute("viewBox",`0 0 ${a.originWidth} ${a.originHeight}`)}),{dx:s,dy:n,dw:i,direction:t,operation:l,startX:g,startY:w,svg:v,ratio:h,handlePanStart:m=>{g.value=m.type.startsWith("mouse")?m.clientX:m.touches[0].clientX,w.value=m.type.startsWith("mouse")?m.clientY:m.touches[0].clientY,m.target===m.currentTarget?l.value="move":(l.value="scale",t.value=m.target.dataset.direction||"")},handlePanMove:m=>{const _=(m.type.startsWith("mouse")?m.clientX:m.touches[0].clientX)-g.value,r=(m.type.startsWith("mouse")?m.clientY:m.touches[0].clientY)-w.value;if(l.value==="move")s.value=_/a.pageScale,n.value=r/a.pageScale;else if(l.value==="scale"){if(t.value==="left-top"){const f=Math.min(_,r*h);s.value=f,i.value=-f,n.value=f/h}if(t.value==="right-bottom"){const f=Math.max(_,r*h);i.value=f}}},handlePanEnd:()=>{l.value==="move"?(o("update",{x:a.x+s.value,y:a.y+n.value}),s.value=0,n.value=0):l.value==="scale"&&(o("update",{x:a.x+s.value,y:a.y+n.value,width:a.width+i.value,scale:(a.width+i.value)/a.originWidth}),s.value=0,n.value=0,i.value=0,t.value=""),l.value=""},onDelete:()=>{o("delete")}}}}),se={ref:"svg",width:"100%",height:"100%"},le=["d"];function re(a,o,s,n,i,t){return e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle({width:`${a.width+a.dw}px`,height:`${a.height+a.dw}px`,transform:`translate(${a.x+a.dx}px, ${a.y+a.dy}px)`}),class:"absolute left-0 top-0 select-none"},[o[0]||(o[0]=e.createElementVNode("div",{class:"absolute h-full w-full cursor-grab border border-dashed border-gray-400"},null,-1)),(e.openBlock(),e.createElementBlock("svg",se,[e.createElementVNode("path",{"stroke-width":"5","stroke-linejoin":"round","stroke-linecap":"round",stroke:"black",fill:"none",d:a.path},null,8,le)],512))],4)}const ie=z(oe,[["render",re],["__scopeId","data-v-30d5d24b"]]),ce={props:{translations:{type:Object,default:()=>({})},type:{type:String,default:"warning"}},computed:{getTranslation(){return this.type==="warning"?{title:this.translations.warningTitle,desc:this.translations.warningDesc,close:this.translations.warningClose}:{title:this.translations.confirmBoxTitle,desc:this.translations.confirmBoxDesc,close:this.translations.confirmBoxClose,saveChanges:this.translations.confirmBoxSaveChanges}}},emits:["finish","cancel"],setup(a,{emit:o}){return{finish:()=>{o("finish")},closeModal:()=>{o("cancel")}}}},de={class:"confirm-modal relative top-40 mx-auto shadow-xl rounded-md bg-white max-w-md mt-40"},ge={class:"flex flex-col bg-white border shadow-sm rounded-xl pointer-events-auto"},fe={class:"flex justify-between items-center py-3 px-4 border-b"},he={class:"font-bold text-gray-800"},me={class:"sr-only"},ue={class:"p-4 overflow-y-auto"},pe={class:"mt-1 text-gray-800"},ye={class:"flex justify-end items-center gap-x-2 py-3 px-4 border-t"};function we(a,o,s,n,i,t){return e.openBlock(),e.createElementBlock(e.Fragment,null,[o[4]||(o[4]=e.createElementVNode("div",{id:"headlessui-dialog-overlay-16","aria-hidden":"true","data-headlessui-state":"open",class:"fixed inset-0 bg-gray-500 opacity-30"},null,-1)),e.createElementVNode("div",de,[e.createElementVNode("div",ge,[e.createElementVNode("div",fe,[e.createElementVNode("h3",he,e.toDisplayString(t.getTranslation.title),1),e.createElementVNode("button",{onClick:o[0]||(o[0]=(...l)=>n.closeModal&&n.closeModal(...l)),type:"button",class:"flex justify-center items-center size-7 text-sm font-semibold rounded-full border border-transparent text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none"},[e.createElementVNode("span",me,e.toDisplayString(t.getTranslation.close),1),o[3]||(o[3]=e.createElementVNode("svg",{class:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e.createElementVNode("path",{d:"M18 6 6 18"}),e.createElementVNode("path",{d:"m6 6 12 12"})],-1))])]),e.createElementVNode("div",ue,[e.createElementVNode("p",pe,e.toDisplayString(t.getTranslation.desc),1)]),e.createElementVNode("div",ye,[e.createElementVNode("button",{onClick:o[1]||(o[1]=(...l)=>n.closeModal&&n.closeModal(...l)),type:"button","data-cy":"close-confirm",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none btn-negative"},e.toDisplayString(t.getTranslation.close),1),s.type==="confirm"?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[2]||(o[2]=(...l)=>n.finish&&n.finish(...l)),type:"button","data-cy":"confirm-save",class:"py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none ml-2 btn-positive"},e.toDisplayString(t.getTranslation.saveChanges),1)):e.createCommentVNode("",!0)])])])],64)}const xe=z(ce,[["render",we],["__scopeId","data-v-31b2ddf9"]]),be={props:{translations:{type:Object,default:()=>({})}},computed:{getTranslation(){return{...{drawLabel:"Draw the signature here",drawDone:"Done",drawCancel:"Cancel",additionalTextField:""},...this.translations}}},emits:["finish","cancel"],setup(a,{emit:o}){const s=e.ref(),n=e.ref([]),i=e.ref(""),t=e.reactive({drawing:!1,x:0,y:0,minX:1/0,minY:1/0,maxX:0,maxY:0}),l=r=>{t.x=r.clientX,t.y=r.clientY;const f=r.target;c({x:t.x,y:t.y,target:f,currentTarget:s.value}),s.value.addEventListener("mousemove",g),s.value.addEventListener("mouseup",w)},g=r=>{r.clientX-t.x,r.clientY-t.y,t.x=r.clientX,t.y=r.clientY,x({x:t.x,y:t.y})},w=r=>{t.x=r.clientX,t.y=r.clientY,k(),s.value.removeEventListener("mousemove",g),s.value.removeEventListener("mouseup",w)},v=r=>{if(r.touches.length>1)return;const f=r.touches[0];t.x=f.clientX,t.y=f.clientY;const F=f.target;c({x:t.x,y:t.y,target:F,currentTarget:s.value}),s.value.addEventListener("touchmove",h),s.value.addEventListener("touchend",u)},h=r=>{if(r.preventDefault(),r.touches.length>1)return;const f=r.touches[0];f.clientX-t.x,f.clientY-t.y,t.x=f.clientX,t.y=f.clientY,x({x:t.x,y:t.y})},u=r=>{const f=r.changedTouches[0];t.x=f.clientX,t.y=f.clientY,k(),s.value.removeEventListener("touchmove",h),s.value.removeEventListener("touchend",u)},c=r=>{if(r.target!==r.currentTarget){t.drawing=!1;return}t.drawing=!0,t.x=r.x,t.y=r.y,t.minX=Math.min(t.minX,t.x),t.maxX=Math.max(t.maxX,t.x),t.minY=Math.min(t.minY,t.y),t.maxY=Math.max(t.maxY,t.y),n.value.push(["M",t.x,t.y]),i.value+=`M${t.x},${t.y}`},x=r=>{t.drawing&&(t.x=r.x,t.y=r.y,t.minX=Math.min(t.minX,t.x),t.maxX=Math.max(t.maxX,t.x),t.minY=Math.min(t.minY,t.y),t.maxY=Math.max(t.maxY,t.y),i.value+=`L${t.x},${t.y}`,n.value.push(["L",t.x,t.y]))},k=()=>{t.drawing=!1},m=()=>{var W;if(!n.value.length)return;const r=-(t.minX-10),f=-(t.minY-10),F=t.maxX-t.minX+20,C=t.maxY-t.minY+20;let V="",T="";const X=n.value.reduce((N,B)=>N+B[0]+(B[1]+r)+","+(B[2]+f),""),S=document.getElementById("signature-path-data");if(S){S.style.display="none",S.removeAttribute("viewBox"),(W=S.querySelector("path"))==null||W.setAttribute("d",X);const N=new XMLSerializer().serializeToString(S);V=btoa(N);const B=new Image;B.src="data:image/svg+xml;base64,"+V,B.onload=()=>{const M=document.createElement("canvas");M.style.display="none",M.width=F,M.height=C;const L=M.getContext("2d");L==null||L.drawImage(B,0,0),T=M.toDataURL("image/png"),T=T.replace("data:image/png;base64,",""),M.remove(),S.innerHTML="",n.value=[],o("finish",{originWidth:F,originHeight:C,path:X,signatureImageData:{data:T,type:"image/png"}})}}},_=()=>{n.value=[],o("cancel")};return e.onMounted(()=>{s.value.addEventListener("mousedown",l),s.value.addEventListener("touchstart",v)}),e.onBeforeUnmount(()=>{s.value.removeEventListener("mousedown",l),s.value.removeEventListener("touchstart",v)}),{signatureCanvas:s,paths:n,path:i,data:t,handlePanStart:c,handlePanMove:x,handlePanEnd:k,finish:m,cancel:_}}},ve={style:{height:"210px"},class:"left-0 right-0 top-0 z-0 border-b border-gray-300 bg-white shadow-lg","data-cy":"sign-area"},De={class:"absolute flex w-full flex-grow items-center justify-center"},Pe={class:"text-black-600"},Ee={class:"absolute bottom-0 right-0 mb-4 mx-4 flex"},ke={class:"flex w-full flex-grow items-center justify-center"},_e={class:"text-black-600"},Se={class:"pointer-events-none h-full w-full",id:"signature-path-data"},Be=["d"];function Ce(a,o,s,n,i,t){return e.openBlock(),e.createElementBlock("div",ve,[e.createElementVNode("div",{ref:"signatureCanvas",onPanstart:o[2]||(o[2]=(...l)=>n.handlePanStart&&n.handlePanStart(...l)),onPanmove:o[3]||(o[3]=(...l)=>n.handlePanMove&&n.handlePanMove(...l)),onPanend:o[4]||(o[4]=(...l)=>n.handlePanEnd&&n.handlePanEnd(...l)),class:"relative h-full w-full select-none"},[e.createElementVNode("div",De,[e.createElementVNode("p",Pe,e.toDisplayString(t.getTranslation.drawLabel),1)]),e.createElementVNode("div",Ee,[e.createElementVNode("div",ke,[e.createElementVNode("p",_e,e.toDisplayString(t.getTranslation.additionalTextField),1)]),e.createElementVNode("button",{onClick:o[0]||(o[0]=(...l)=>n.finish&&n.finish(...l)),class:"mx-4 w-24 rounded bg-blue-600 px-4 py-1 font-bold text-white hover:bg-blue-700 btn-positive","data-cy":"sign-done"},e.toDisplayString(t.getTranslation.drawDone),1),e.createElementVNode("button",{onClick:o[1]||(o[1]=(...l)=>n.cancel&&n.cancel(...l)),class:"w-24 rounded bg-red-500 px-4 py-1 font-bold text-white hover:bg-red-700 btn-negative","data-cy":"sign-cancel"},e.toDisplayString(t.getTranslation.drawCancel),1)]),(e.openBlock(),e.createElementBlock("svg",Se,[e.createElementVNode("path",{"stroke-width":"5","stroke-linejoin":"round","stroke-linecap":"round",d:n.path,stroke:"black",fill:"none"},null,8,Be)]))],544)])}const Fe=z(be,[["render",Ce]]),J=()=>{Z.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.mjs",typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:H&&H.tagName.toUpperCase()==="SCRIPT"&&H.src||new URL("draw-sign-pdf.umd.js",document.baseURI).href).toString()},Te=async(a,o="string")=>{let s;if(o==="string"&&typeof a=="string"){console.log("Processing string input, length:",a.length);const t=atob(a);console.log("Binary string length:",t.length);const l=new Uint8Array(t.length);for(let g=0;g<t.length;g++)l[g]=t.charCodeAt(g);s=l.buffer,console.log("ArrayBuffer size:",s.byteLength)}else if(a instanceof File)console.log("Processing File input, size:",a.size),s=await a.arrayBuffer(),console.log("File ArrayBuffer size:",s.byteLength);else throw new Error("Invalid input type for readAsPDF");const{PDFDocument:n}=await import("pdf-lib"),i=await n.load(s);return console.log("PDF document loaded successfully"),i},Ne=(a,o)=>{$(a,o,"application/pdf")},Me=async a=>{console.log("Getting PDF document from pdf-lib document");const o=await a.save();console.log("PDF bytes length:",o.length);const s=q.getDocument({data:o});return console.log("PDF.js loading task created"),s.promise},Ve=async(a,o)=>a.getPage(o),Le=async a=>{const o=document.createElement("canvas"),s=a.getViewport({scale:1.5}),n=o.getContext("2d");if(!n)throw new Error("Could not get canvas context");return o.height=s.height,o.width=s.width,await a.render({canvasContext:n,viewport:s}).promise,{page:a,canvas:o}};function Xe(){let a=0;return function(){return a++}}async function Ye(a,o,s,n=!1){let i;try{const l=await a.arrayBuffer();i=await G.PDFDocument.load(l)}catch(l){throw console.error("Error loading PDF:",l),l}const t=i.getPages().map(async(l,g)=>{const w=o[g]||[],v=l.getHeight(),h=w.map(async c=>{if(c.type==="drawing"){const{x,y:k,path:m,originWidth:_,originHeight:r,width:f,height:F,scale:C}=c,V=_*C,T=r*C,X=x+(f-V)/2,S=k+(F-T)/2;l.drawSvgPath(m,{x:X,y:v-S,scale:C,borderWidth:5,borderColor:G.rgb(0,0,0),borderLineCap:"Round",borderLineJoin:"Round"})}});(await Promise.all(h)).forEach(c=>c&&c())});await Promise.all(t);try{const l=await i.save();return n&&Ne(l,s),await i.saveAsBase64()}catch(l){throw console.error("Error saving PDF:",l),l}}const je={name:"DrawSignPdf",components:{PDFPage:ae,DrawingCanvas:Fe,DrawingSignature:ie,DialogBox:xe},props:{pdfData:String,signatureData:Array,isDownload:{type:Boolean,default:!1},finish:Function,translations:{type:Object,default:()=>({})}},computed:{getTranslation(){return{...{updateSign:"Update Signature",save:"Save",saving:"Saving",drawLabel:"Draw the signature here",drawDone:"Done",drawCancel:"Cancel",confirmBoxTitle:"Confirm Saving",confirmBoxDesc:"Are you sure you want to save the signed document?",confirmBoxClose:"Close",confirmBoxSaveChanges:"Save Changes",warningTitle:"Missing Signature",warningDesc:"The required signature is missing. Please sign to continue",warningClose:"Close",pdfLoading:"PDF will load here",additionalTextField:""},...this.translations}}},emits:["finish"],setup(a,{emit:o}){const s=Xe(),n=e.ref(null),i=e.ref(""),t=e.ref([]),l=e.ref([]),g=e.ref([]),w=e.ref("Times-Roman"),v=e.ref(null),h=e.ref(-1),u=e.ref(!1),c=e.ref(!1),x=e.ref(""),k=e.ref({data:"",type:"application/pdf"}),m=e.ref(!1),_=e.ref("warning");e.onMounted(async()=>{try{if(console.log("Initializing PDF.js..."),J(),console.log("PDF.js initialized"),console.log("Checking pdfData:",a.pdfData),!a.pdfData){console.error("No PDF data provided");return}h.value=0,console.log("Starting PDF loading process..."),await f(a.pdfData,"string"),console.log("PDF loaded successfully"),C(),document.addEventListener("keydown",K)}catch(d){console.error("Error in onMounted:",d)}}),e.onBeforeUnmount(()=>{document.addEventListener("keydown",K)});const r=async d=>{const p=(d.target.files||d.dataTransfer&&d.dataTransfer.files)[0];if(!(!p||p.type!=="application/pdf")){h.value=-1;try{await f(p,"arrayBuffer"),h.value=0}catch{}}},f=async(d,y)=>{try{console.log("Starting addPDF with type:",y);const p=await Te(d,y);console.log("PDF read successfully");const b=await Me(p);console.log("PDF document loaded, number of pages:",b.numPages);const D=[],U=[],A=[];for(let P=1;P<=b.numPages;P++){const Y=await Ve(b,P);console.log(`Loading page ${P}...`);const{page:I}=await Le(Y);console.log(`Page ${P} rendered`),D.push(Promise.resolve(I)),U.push({scale:1}),A.push([])}if(t.value=D,l.value=U,g.value=A,y==="string"){const P=atob(d),Y=new Uint8Array(P.length);for(let j=0;j<P.length;j++)Y[j]=P.charCodeAt(j);const I=new Blob([Y],{type:"application/pdf"});n.value=new File([I],"document.pdf",{type:"application/pdf"}),i.value="document.pdf"}console.log("All pages loaded and initialized")}catch(p){throw console.error("Error in addPDF:",p),p}},F=async d=>{x.value=d.signatureImageData;const{originWidth:y,originHeight:p,path:b}=d;await V(y,p,b),c.value=!1},C=()=>{h.value>=0&&(c.value=!0)},V=(d,y,p)=>{var b;g.value=Array(g.value.length).fill([]),(b=a.signatureData)==null||b.forEach(D=>{const U=s(),A=N(D.width),P=N(D.height),Y=A/d,I=P/y,j=Math.min(Y,I),Ke={id:U,path:p,type:"drawing",x:N(D.left),y:N(D.top),originWidth:d,originHeight:y,width:A,height:P,scale:j},R=D.page-1;g.value[R]&&(g.value[R]=[...g.value[R],Ke])})},T=d=>{h.value=d},X=(d,y)=>{g.value=g.value.map((p,b)=>b==h.value?p.map(D=>D.id===d?{...D,...y}:D):p)},S=d=>{g.value=g.value.map((y,p)=>p==h.value?y.filter(b=>b.id!==d):y)},W=(d,y)=>{l.value[y]=d},N=d=>d*72/2.54,B=async()=>{if(!n.value||u.value||!t.value.length){console.error("Cannot save: missing pdfFile or pages, or already saving");return}u.value=!0;try{console.log("Starting PDF save process...");const d=await Ye(n.value,g.value,i.value,a.isDownload);console.log("PDF saved successfully"),k.value={type:"application/pdf",data:d},o("finish",{signedDocument:k.value,signatureImage:x.value}),console.log("Finish event emitted")}catch(d){console.error("Error saving PDF:",d)}finally{u.value=!1}},M=()=>{x.value!==""?_.value="confirm":_.value="warning",m.value=!0,document.body.classList.add("overflow-y-hidden")},L=()=>{m.value=!1,document.body.classList.remove("overflow-y-hidden")},Je=()=>{B(),L()},K=d=>{(d.key==="Escape"||d.key==="Esc")&&L()};return{genID:s,pdfFile:n,pdfName:i,pages:t,pagesScale:l,allObjects:g,currentFont:w,focusId:v,selectedPageIndex:h,saving:u,addingDrawing:c,isOpenConfirm:m,onUploadPDF:r,addPDF:f,onAddDrawing:C,addDrawing:V,selectPage:T,updateObject:X,deleteObject:S,onMeasure:W,savePDF:B,onFinishDrawing:F,openModal:M,closeModal:L,confirmSave:Je,isConfirmOrWarning:_}}},ze={key:0,id:"modelConfirm",class:"fixed inset-0 z-50 h-full w-full overflow-y-auto bg-gray-900 bg-opacity-60 px-4"},Oe={class:"flex min-h-screen flex-col items-center bg-gray-100 py-5"},Ae={class:"left-0 right-0 top-0 z-10 flex h-12 items-center justify-center"},Ie={key:0,class:"sign-drawing-canvas fixed left-0 right-0 top-0 z-10 items-center justify-center border-b border-gray-300 bg-white shadow-lg",style:{height:"200px","z-index":"60",width:"100%"},"data-cy":"sign-drawing-canvas"},We={key:1,class:"w-full"},Ue=["onMousedown","onTouchstart","data-cy"],He={key:2,class:"flex w-full flex-grow items-center justify-center"},Re={class:"text-3xl font-bold text-gray-500"};function qe(a,o,s,n,i,t){const l=e.resolveComponent("DialogBox"),g=e.resolveComponent("DrawingCanvas"),w=e.resolveComponent("PDFPage"),v=e.resolveComponent("DrawingSignature");return e.openBlock(),e.createElementBlock(e.Fragment,null,[n.isOpenConfirm?(e.openBlock(),e.createElementBlock("div",ze,[e.createVNode(l,{translations:t.getTranslation,type:n.isConfirmOrWarning,onCancel:n.closeModal,onFinish:n.confirmSave},null,8,["translations","type","onCancel","onFinish"])])):e.createCommentVNode("",!0),e.createElementVNode("div",null,[e.createElementVNode("main",Oe,[e.createElementVNode("div",Ae,[e.createElementVNode("button",{onClick:o[0]||(o[0]=(...h)=>n.onAddDrawing&&n.onAddDrawing(...h)),class:"btn-positive ml-3 mr-3 rounded bg-blue-500 px-3 py-1 font-bold text-white hover:bg-blue-700 md:mr-4 md:px-4","data-cy":"update-sign"},e.toDisplayString(t.getTranslation.updateSign),1),e.createElementVNode("button",{onClick:o[1]||(o[1]=(...h)=>n.openModal&&n.openModal(...h)),class:e.normalizeClass(["btn-positive mr-3 rounded bg-blue-500 px-3 py-1 font-bold text-white hover:bg-blue-700 md:mr-4 md:px-4",{"cursor-not-allowed":n.pages.length===0||n.saving,"bg-blue-700":n.pages.length===0||n.saving}]),"data-cy":"save-sign"},e.toDisplayString(n.saving?t.getTranslation.saving:t.getTranslation.save),3)]),n.addingDrawing?(e.openBlock(),e.createElementBlock("div",Ie,[e.createVNode(g,{onFinish:n.onFinishDrawing,onCancel:o[2]||(o[2]=h=>n.addingDrawing=!1),translations:t.getTranslation},null,8,["onFinish","translations"])])):e.createCommentVNode("",!0),n.pages.length?(e.openBlock(),e.createElementBlock("div",We,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.pages,(h,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"flex w-full flex-col items-center overflow-hidden p-5",onMousedown:c=>n.selectPage(u),onTouchstart:c=>n.selectPage(u),"data-cy":"page-"+u},[e.createElementVNode("div",{class:e.normalizeClass(["relative shadow-lg",{"shadow-outline":u===n.selectedPageIndex}])},[e.createVNode(w,{onMeasure:c=>n.onMeasure(c,u),page:h},null,8,["onMeasure","page"]),e.createElementVNode("div",{class:"absolute left-0 top-0 origin-top-left transform",style:e.normalizeStyle({transform:`scale(${n.pagesScale[u].scale})`,touchAction:"none"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.allObjects[u],c=>{var x;return e.openBlock(),e.createElementBlock("div",{key:c.id},[c.type==="drawing"?(e.openBlock(),e.createBlock(v,{key:0,onUpdate:k=>n.updateObject(c.id,k),onDelete:()=>n.deleteObject(c.id),path:c.path,x:c.x,y:c.y,width:c.width,height:c.height,originWidth:c.originWidth,originHeight:c.originHeight,pageScale:(x=n.pagesScale[u])==null?void 0:x.scale,"data-cy":"sign-pos-"+c.id},null,8,["onUpdate","onDelete","path","x","y","width","height","originWidth","originHeight","pageScale","data-cy"])):e.createCommentVNode("",!0)])}),128))],4)],2)],40,Ue))),128))])):(e.openBlock(),e.createElementBlock("div",He,[e.createElementVNode("span",Re,e.toDisplayString(t.getTranslation.pdfLoading),1)]))])])],64)}const O=z(je,[["render",qe],["__scopeId","data-v-a4538877"]]);J();const Ge=a=>{a.component(O.name,O)};O.install=Ge,E.DrawSignPdf=O,E.default=O,Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
